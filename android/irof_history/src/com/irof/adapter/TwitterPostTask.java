package com.irof.adapter;import java.io.File;import com.irof.irof_history.IrofActivity;import com.irof.sns.twitter_main;import com.irof.util.LogUtil;import com.irof.util.PrefUtil;/** * Task バックグラウンド処理用のクラス */public class TwitterPostTask extends commonPostTask {	String	TAG	= TwitterPostTask.this.getClass().getSimpleName();	// コンストラクタ	public TwitterPostTask(IrofActivity activity_) {		super(activity_);	}	private File	newfile;	@Override	protected void onPreExecute() {		super.onPreExecute();		newfile = saveImageFile();	}	@Override	protected String doInBackground(String... params) {		String sNo = params[0];		// Twできていなかったらポストしてクリア		String tw = PrefUtil.get_string("tw", "");		if (!"".equals(tw)) {			try {				twitter_main.m_twitter.updateStatus(tw);				PrefUtil.put_string("tw", "");			}			catch (Exception e) {				LogUtil.error(TAG, "m_twitter:updateStatus", e);			}		}		if (newfile == null) return null;		String str = createPostMessage(sNo);		try {			String url = upload_main(str, newfile);			if (url != null && mode_twitter == 0) {// TwitPicに投稿した時				twitter_main.m_twitter.updateStatus(String.format("%s %s", str,						url));			}		}		catch (Exception e) {			LogUtil.error(TAG, "m_twitter:updateStatus", e);			PrefUtil.put_string("tw", str);		}		return "";	}}