package com.irof.util;import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.media.AudioManager;public class HeadsetStateReceiver extends BroadcastReceiver {	private String TAG = "HeadsetStateReceiver";	private boolean isPlugged = false;    private String headsetType = null;    private boolean isMicrophone = false;	        @Override    public void onReceive(Context context, Intent intent) {		String action = intent==null ? null :intent.getAction();    	LogUtil.trace(TAG, "==["+TAG+"]onReceive==" + action);    	//プラグを差している時のイベント        if (Intent.ACTION_HEADSET_PLUG.equals(intent.getAction())) {                        // http://developer.android.com/reference/android/content/Intent.html#ACTION_HEADSET_PLUG            // http://stackoverflow.com/questions/7590644/action-headset-plug-not-documented-extra-strange-state                        int state = intent.getIntExtra("state", 0);            setPlugged((state > 0)); // 0:unplugged,1:headset with microphone,2:a headset with no microphone                        String name = intent.getStringExtra("name");            setHeadsetType(name);                        int microphone  = intent.getIntExtra("microphone", 0);            setMicrophone((microphone == 1));        }        else if(AudioManager.ACTION_AUDIO_BECOMING_NOISY.equals(intent.getAction())){         	//プラグを抜く時のイベント        	setPlugged(false);        }    }    public boolean isPlugged() {        return isPlugged;    }    public void setPlugged(boolean isPlugged) {        this.isPlugged = isPlugged;    }    public String getHeadsetType() {        return headsetType;    }    public void setHeadsetType(String headsetType) {        this.headsetType = headsetType;    }    public boolean isMicrophone() {        return isMicrophone;    }    public void setMicrophone(boolean isMicrophone) {        this.isMicrophone = isMicrophone;    }}